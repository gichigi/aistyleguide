---
description: 
globs: 
alwaysApply: false
---
# AI Style Guide Generator - Project Scratchpad

## ğŸ“‹ Project Overview
Web app that generates brand style guides from website URLs using AI to extract and analyze brand elements. Built with Next.js, TypeScript, Tailwind CSS, OpenAI API, and Stripe.

## ğŸ¯ Core User Journey
1. **Landing Page** â†’ Enter website URL or create manually
2. **Website Analysis** â†’ AI extracts brand info and autofills form
3. **Brand Details** â†’ User reviews/edits brand information  
4. **Preview** â†’ Shows partial style guide with paywall
5. **Payment** â†’ Stripe checkout for full access
6. **Email Capture** â†’ Collects email for thank you & abandoned cart recovery
7. **Full Access** â†’ Complete style guide with download options

## âœ… Fully Completed & Deployed

### Core Application Infrastructure
- âœ… **Complete user journey** - Landing page â†’ Brand details â†’ Preview â†’ Payment â†’ Full access
- âœ… **AI website analysis** - Extracts brand info, autofills forms, handles multiple content types
- âœ… **Brand details form** - Real-time validation, character limits, comprehensive error handling
- âœ… **Template processing system** - Advanced markdown processing, validation, variable replacement
- âœ… **AI content generation** - OpenAI integration for voice traits, style rules, complete guides

### Payment & Email Systems
- âœ… **Stripe integration** - Complete checkout flow, webhook handling, test/live mode switching
- âœ… **Email automation** - Resend integration, thank you emails, abandoned cart recovery
- âœ… **Webhook processing** - Handles payment success, session expiration, discount codes
- âœ… **Email templates** - Professional HTML+text versions with branding

### Mobile & UI Experience
- âœ… **Mobile responsiveness** - Comprehensive responsive design across all pages
- âœ… **Mobile-optimized components** - Buttons, dialogs, navigation, form inputs
- âœ… **Loading states & animations** - Professional feedback throughout user journey
- âœ… **Preview system with paywall** - Fade-out effect, professional payment dialog

### Technical Foundation
- âœ… **Type safety** - Comprehensive TypeScript implementation with proper error handling
- âœ… **Security measures** - Input validation, timeout handling, no test endpoints in production
- âœ… **Performance optimizations** - Parallel API calls, appropriate model selection, caching
- âœ… **Template validation** - Content structure validation, markdown formatting, error recovery

### Download & Export
- âœ… **Multi-format downloads** - PDF, DOCX, HTML generation with consistent styling
- âœ… **File generation system** - Professional formatting, brand-consistent layouts

## ğŸ”§ Setup & Configuration Needed

### High Priority (P0) - Blocking Production
- ï¿½ **Email service configuration**:
  - Need: Real Resend API key (currently using placeholder)
  - Need: Domain verification for aistyleguide.com
  - Status: Code ready, just needs API key and DNS setup

### Medium Priority (P1) - Production Improvements  
- ğŸ”§ **Analytics & monitoring** - Add production error tracking and user behavior analytics
- ğŸ”§ **Performance monitoring** - Set up logging for API response times and error rates

## ï¿½ Minor Optimizations & Polish

### Mobile Conversion (P2)
- ğŸ”„ **Paywall positioning** - Reduce fade-out height on mobile to reach CTA faster
- ğŸ”„ **Button accessibility** - Ensure all CTA buttons meet minimum touch target size

### UI Polish (P2)
- ğŸ”„ **Loading states** - Replace preview loading interstitial with inline button states
- ğŸ”„ **Error messaging** - Improve error message copy and retry options

### Content Validation (P2)
- ğŸ”„ **Rule display validation** - Verify all 25 core rules and 99+ complete rules render correctly
- ğŸ”„ **Template consistency** - Ensure core_template.md remains single source of truth

## ğŸ“š Key Technical Notes

### Architecture Overview
- **Frontend**: Next.js 14, TypeScript, Tailwind CSS, Styled Components
- **Package Manager**: pnpm (always use instead of npm)
- **Backend**: Next.js API routes, OpenAI API, Stripe webhooks
- **Email**: Resend service with HTML+text templates
- **Storage**: localStorage for brand details, sessionStorage for temporary data

### Mobile Implementation Status
- **Responsive Design**: âœ… Fully implemented with sm:, md:, lg:, xl: breakpoints
- **Mobile-Specific CSS**: âœ… Comprehensive mobile optimizations in globals.css
- **Touch Targets**: âœ… All buttons meet accessibility standards
- **Mobile Dialogs**: âœ… Responsive payment dialogs with stacked layouts

### Email System Status
- **Service Integration**: âœ… Resend fully integrated with error handling
- **Template System**: âœ… Both thank you and abandoned cart emails implemented
- **Webhook Processing**: âœ… Complete event handling for success/expiration
- **Missing**: Real API key and domain verification only

### Payment Flow Status
- **Stripe Integration**: âœ… Complete with test/live mode support
- **Checkout Process**: âœ… Both core ($99) and complete ($149) options
- **Success Handling**: âœ… Proper redirects and access granting
- **Error Handling**: âœ… Comprehensive error states and retry logic

### Template Processing Status
- **Template Loading**: âœ… Dynamic template loading via API
- **Content Generation**: âœ… AI-powered content with validation
- **Markdown Processing**: âœ… Advanced formatting and structure validation
- **Variable Replacement**: âœ… Brand-specific content insertion

## ğŸ—ºï¸ Future Roadmap

### Short Term (Next 2 weeks)
- **Production deployment** - Set up email service and deploy to production
- **Analytics integration** - Add user behavior tracking and conversion metrics
- **Minor optimizations** - Address mobile conversion and UI polish items

### Medium Term (1-2 months)  
- **Advanced customization** - Allow users to modify generated content
- **Template variety** - Additional style guide formats and industry-specific templates
- **User dashboard** - Manage multiple purchased guides

### Long Term (3+ months)
- **Team collaboration** - Share guides within organizations
- **API for developers** - Programmatic access to style guide generation
- **White-label solution** - Agency reseller program

## ï¿½ Development Notes

### Environment Variables Required
```
RESEND_API_KEY=your_real_api_key_here
STRIPE_MODE=test (or live for production)
STRIPE_TEST_SECRET_KEY=sk_test_...
STRIPE_SECRET_KEY=sk_live_...
STRIPE_TEST_WEBHOOK_SECRET=whsec_...
STRIPE_WEBHOOK_SECRET=whsec_...
NEXT_PUBLIC_APP_URL=https://aistyleguide.com
```

### Key Implementation Files
- `app/page.tsx` - Landing page with URL analysis (876 lines)
- `app/preview/page.tsx` - Preview with paywall (472 lines)
- `app/api/webhook/route.ts` - Email automation (237 lines)
- `lib/template-processor.ts` - Content generation (590 lines)
- `lib/email-service.ts` - Email templates (326 lines)

### Mobile CSS Classes Used
- Responsive breakpoints: `sm:`, `md:`, `lg:`, `xl:`
- Mobile-specific utilities: `.mobile-button`, `.mobile-dropdown`
- Touch-friendly sizing: `.mobile-action-button`
- Dialog adaptations: `.dialog-footer-mobile`

---

*Last updated: January 2025*
*Status: Production Ready - Needs Email Configuration Only*